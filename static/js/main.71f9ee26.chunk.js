(this.webpackJsonpaviasales=this.webpackJsonpaviasales||[]).push([[0],Array(21).concat([function(e,t,n){},,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),i=n(6),a=n.n(i),s=(n(21),n(13)),o=n(3),u=n(4),l=[{title:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",value:"0"},{title:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",value:"1"},{title:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",value:"2"},{title:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",value:"3"}],h=[{name:"cheap",title:"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439",position:"l"},{name:"quick",title:"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"},{name:"optimal",title:"\u041e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439",position:"r"}],d={radio:"cheap",checkboxes:l.map((function(e){return e.value}))},b=Object(u.c)({name:"filterTickets",initialState:d,reducers:{updataRadio:function(e,t){e.radio=t.payload},"mark\u0421heckbox":function(e,t){e.checkboxes.push(t.payload)},"remove\u0421heckbox":function(e,t){var n=e.checkboxes.indexOf(t.payload);e.checkboxes.splice(n,1)},markAllCheckbox:function(e){e.checkboxes=l.map((function(e){return e.value}))},"removeAll\u0421heckbox":function(e){e.checkboxes=[]}}}),j=b.reducer,f=b.actions,p=f.updataRadio,x=f.mark\u0421heckbox,k=f.remove\u0421heckbox,m=f.markAllCheckbox,O=f.removeAll\u0421heckbox,v=n(12),g=n.n(v),_=n(14),N=Object(u.c)({name:"preloaderSlice",initialState:{isShow:!0},reducers:{showPreloader:function(e){e.isShow=!0},hidePreloader:function(e){e.isShow=!1}}}),w=N.reducer,C=N.actions,S=C.showPreloader,T=C.hidePreloader,y=n(15),M=n(16),P=new(function(){function e(t){Object(y.a)(this,e),this.url=void 0,this.url=t.url}return Object(M.a)(e,[{key:"getSearchId",value:function(){return fetch(this.url+"/search",{method:"GET"}).then(this._getResponseData)}},{key:"getPackTickets",value:function(e){return fetch("".concat(this.url,"/tickets?searchId=").concat(e),{method:"GET"}).then(this._getResponseData)}},{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}}]),e}())({url:"https://front-test.beta.aviasales.ru"}),R=Object(u.b)("/tickets",function(){var e=Object(_.a)(g.a.mark((function e(t,n){var c,r,i,a,s,o,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch(S()),c=[],r=0,e.next=5,P.getSearchId().catch((function(e){return console.log(e)}));case 5:i=e.sent,a=i.searchId;case 7:if(!(r<7)){e.next=24;break}return e.prev=8,e.next=11,P.getPackTickets(a).catch((function(e){return console.log(e)}));case 11:if(s=e.sent,o=s.tickets,u=s.stop,c=c.concat(o),!u){e.next=17;break}return e.abrupt("break",24);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),r++;case 22:e.next=7;break;case 24:return n.dispatch(T()),e.abrupt("return",c);case 26:case"end":return e.stop()}}),e,null,[[8,19]])})));return function(t,n){return e.apply(this,arguments)}}()),A=Object(u.c)({name:"filterTickets",initialState:{tickets:[]},reducers:{},extraReducers:function(e){e.addCase(R.fulfilled,(function(e,t){e.tickets=t.payload}))}}).reducer,I=(n(27),n(0)),D=function(e){var t=e.handleChange,n=e.data,c=e.checked\u0421heckboxes;return Object(I.jsxs)("label",{className:"checkbox",children:[Object(I.jsx)("input",{onChange:function(e){return t(e)},className:"checkbox__invisible",type:"checkbox",checked:-1!==c.indexOf(n.value)||c.length===l.length,value:n.value}),Object(I.jsx)("span",{className:"checkbox__visible"}),n.title]})},F=(n(29),function(e){var t=e.children;return Object(I.jsx)("div",{className:"container",children:t})}),E=(n(30),function(e){var t=e.checked\u0421heckboxes,n=e.handle\u0421heckbox,c=e.handleCheckboxAll;return Object(I.jsx)(F,{children:Object(I.jsxs)("aside",{className:"filter",children:[Object(I.jsx)("p",{className:"filter__title",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"}),Object(I.jsx)(D,{handleChange:c,data:{title:"\u0412\u0441\u0435",value:"-1"},"checked\u0421heckboxes":t}),l.map((function(e){return Object(I.jsx)(D,{handleChange:n,data:e,"checked\u0421heckboxes":t},e.title)}))]})})}),V=(n(31),function(e){var t=e.currentValue,n=e.handleChange,c=e.name,r=e.title,i=e.position;return Object(I.jsxs)("label",{className:"input-radio",children:[Object(I.jsx)("input",{onChange:function(e){return n(e)},checked:t===c,className:"input-radio__invisible",type:"radio",name:c,value:c,tabIndex:1}),Object(I.jsx)("span",{className:"input-radio__visible  ".concat("l"===i&&"input-radio__invisible_position_left"," \n      ").concat("r"===i&&"input-radio__invisible_position_right"),children:r})]})}),q=(n(32),function(e){var t=e.radioValue,n=e.handleRadio;return Object(I.jsx)("div",{className:"tabs",children:h.map((function(e){return Object(I.jsx)(V,{handleChange:n,name:e.name,currentValue:t,title:e.title,position:e.position},e.name)}))})}),B=n.p+"static/media/logo.309a1b5d.svg",G=(n(33),function(){return Object(I.jsx)("header",{className:"header",children:Object(I.jsx)("img",{className:"header__logo",src:B,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f."})})}),J=(n(34),function(e){var t=e.children;return Object(I.jsx)("main",{className:"main",children:t})}),L=(n(35),function(e){var t=e.children;return Object(I.jsx)("div",{className:"column",children:t})}),H=(n(36),function(e){var t=e.children;return Object(I.jsx)("ul",{className:"tickets-list",children:t})}),z=(n(37),function(e){var t=e.title,n=e.text;return Object(I.jsxs)("div",{className:"cell",children:[Object(I.jsx)("p",{className:"cell__title",children:t}),n&&Object(I.jsx)("p",{className:"cell__text",children:n})]})}),K=(n(38),function(e){var t=e.isFirst,n=e.children;return Object(I.jsx)("div",{className:"row ".concat(t&&"row_first"),children:n})}),Q=(n(39),function(e){var t=e.data,n=t.price,c=t.carrier,r=t.segments;return Object(I.jsxs)("li",{className:"ticket",children:[Object(I.jsxs)(K,{isFirst:!0,children:[Object(I.jsxs)("p",{className:"ticket__price",children:[n," \u0420"]}),Object(I.jsx)("img",{className:"ticket__logo",src:"https://pics.avs.io/99/36/".concat(c,".png"),alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u0430\u0432\u0438\u0430\u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438."})]}),r.map((function(e,t){return Object(I.jsxs)(K,{children:[Object(I.jsx)(z,{title:e.origin+"-"+e.destination,text:e.departureTime+"-"+e.arrivalTime}),Object(I.jsx)(z,{title:"\u0412 \u043f\u0443\u0442\u0438",text:e.duration}),Object(I.jsx)(z,{title:e.transplants,text:e.stops})]},t)}))]})});function U(e){return("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)}function W(e){return e<60?e+"\u043c":e<1440?Math.floor(e/60)+"\u0447 "+e%60+"\u043c":Math.floor(e/1440)+"\u0434 "+Math.floor(e%1440/60)+"\u0447 "+e%60+"\u043c"}var X=function(e){var t=e.data,n=t.price,r=t.carrier,i=t.segments,a=Object(c.useMemo)((function(){return{price:n,carrier:r,segments:i.map((function(e){return{origin:e.origin,destination:e.destination,departureTime:U(new Date(e.date)),arrivalTime:(n=new Date(e.date),c=e.duration,n.setMinutes(n.getMinutes()+c),U(n)),stops:e.stops.join(","),transplants:(t=e.stops.length,0===t?"0 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a":1===t?"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430":t<5?t+" \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438":t+" \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),duration:W(e.duration)};var t,n,c}))}}),[r,n,i]);return Object(I.jsx)(F,{children:Object(I.jsx)(Q,{data:a})})},Y=(n(40),function(e){var t=e.title,n=e.onClick,c=e.isShow;return Object(I.jsx)("button",{onClick:n,className:"btn ".concat(c&&"btn_show"),children:t})});var Z=n(8);function $(e){return e.segments.reduce((function(e,t){return e+t.duration}),0)}n(41),n(42);var ee=function(e){var t=e.isShow;return Object(I.jsx)("div",{className:"preloader ".concat(t&&"preloader_show"),children:Object(I.jsx)("div",{className:"preloader__container",children:Object(I.jsx)("span",{className:"preloader__round"})})})};var te=function(){var e=Object(o.c)((function(e){return e.tickets.tickets})),t=Object(o.c)((function(e){return e.preloader.isShow})),n=Object(o.c)((function(e){return e.filterTickets.radio})),r=Object(o.c)((function(e){return e.filterTickets.checkboxes})),i=Object(c.useState)(5),a=Object(s.a)(i,2),u=a[0],h=a[1],d=Object(c.useState)([]),b=Object(s.a)(d,2),j=b[0],f=b[1],v=Object(o.b)();Object(c.useEffect)((function(){f(function(e,t){switch(t){case"cheap":return Object(Z.a)(e).sort((function(e,t){return e.price-t.price}));case"quick":return Object(Z.a)(e).sort((function(e,t){return $(e)-$(t)}));case"optimal":return Object(Z.a)(e).sort((function(e,t){return e.price+4*$(e)-(t.price+4*$(t))}));default:return e}}(e,n))}),[e,n]);var g=Object(c.useMemo)((function(){return function(e,t,n){if(0===e.length)return e;for(var c=[],r=0;c.length<n&&r<e.length;r++)e[r].segments.every((function(e){return t.includes(""+e.stops.length)}))&&c.push(e[r]);return c}(j,r,u)}),[j,r,u]);return Object(c.useEffect)((function(){v(R())}),[]),Object(I.jsxs)("div",{className:"app",children:[Object(I.jsx)(G,{}),Object(I.jsxs)(J,{children:[Object(I.jsx)(E,{"checked\u0421heckboxes":r,"handle\u0421heckbox":function(e){var t=e.target,n=t.checked,c=t.value;v(n?x(c):k(c))},handleCheckboxAll:function(e){r.length<l.length?v(m()):v(O())}}),Object(I.jsxs)(L,{children:[Object(I.jsx)(q,{radioValue:n,handleRadio:function(e){v(p(e.target.value))}}),Object(I.jsxs)(H,{children:[g.map((function(e,t){return Object(I.jsx)(X,{data:e},t)})),Object(I.jsx)(ee,{isShow:t})]}),Object(I.jsx)(Y,{onClick:function(){h((function(e){return e+5}))},isShow:!t,title:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435 5 \u0431\u0438\u043b\u0435\u0442\u043e\u0432!"})]})]})]})},ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,44)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),i(e),a(e)}))},ce=n(2),re=Object(ce.b)({filterTickets:j,tickets:A,preloader:w}),ie=Object(u.a)({reducer:re});a.a.render(Object(I.jsx)(r.a.StrictMode,{children:Object(I.jsx)(o.a,{store:ie,children:Object(I.jsx)(te,{})})}),document.getElementById("root")),ne()}]),[[43,1,2]]]);
//# sourceMappingURL=main.71f9ee26.chunk.js.map