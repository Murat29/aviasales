(this.webpackJsonpaviasales=this.webpackJsonpaviasales||[]).push([[0],Array(21).concat([function(e,t,n){},,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),i=n(6),a=n.n(i),s=(n(21),n(13)),o=n(3),u=n(4),l=[{title:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",value:"0"},{title:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",value:"1"},{title:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",value:"2"},{title:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",value:"3"}],h=[{name:"cheap",title:"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439",position:"l"},{name:"quick",title:"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"},{name:"optimal",title:"\u041e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439",position:"r"}],d={radio:"cheap",checkboxes:l.map((function(e){return e.value}))},b=Object(u.c)({name:"filterTickets",initialState:d,reducers:{updataRadio:function(e,t){e.radio=t.payload},"mark\u0421heckbox":function(e,t){e.checkboxes.push(t.payload)},"remove\u0421heckbox":function(e,t){var n=e.checkboxes.indexOf(t.payload);e.checkboxes.splice(n,1)},markAllCheckbox:function(e){e.checkboxes=l.map((function(e){return e.value}))},"removeAll\u0421heckbox":function(e){e.checkboxes=[]}}}),j=b.reducer,f=b.actions,x=f.updataRadio,p=f.mark\u0421heckbox,k=f.remove\u0421heckbox,m=f.markAllCheckbox,O=f.removeAll\u0421heckbox,v=n(12),g=n.n(v),_=n(14),N=n(15),w=n(16),C=new(function(){function e(t){Object(N.a)(this,e),this.url=void 0,this.url=t.url}return Object(w.a)(e,[{key:"getSearchId",value:function(){return fetch(this.url+"/search",{method:"GET"}).then(this._getResponseData)}},{key:"getPackTickets",value:function(e){return fetch("".concat(this.url,"/tickets?searchId=").concat(e),{method:"GET"}).then(this._getResponseData)}},{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}}]),e}())({url:"https://front-test.beta.aviasales.ru"}),S=Object(u.b)("/tickets",function(){var e=Object(_.a)(g.a.mark((function e(t,n){var c,r,i,a,s,o,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch(M()),c=[],r=0,e.next=5,C.getSearchId().catch((function(e){return console.log(e)}));case 5:i=e.sent,a=i.searchId;case 7:if(!(r<7)){e.next=24;break}return e.prev=8,e.next=11,C.getPackTickets(a).catch((function(e){return console.log(e)}));case 11:if(s=e.sent,o=s.tickets,u=s.stop,c=c.concat(o),!u){e.next=17;break}return e.abrupt("break",24);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),r++;case 22:e.next=7;break;case 24:return e.abrupt("return",c);case 25:case"end":return e.stop()}}),e,null,[[8,19]])})));return function(t,n){return e.apply(this,arguments)}}()),T=Object(u.c)({name:"filterTickets",initialState:{tickets:[],isShowPreloader:!0},reducers:{showPreloader:function(e){e.isShowPreloader=!0},hidePreloader:function(e){e.isShowPreloader=!1}},extraReducers:function(e){e.addCase(S.fulfilled,(function(e,t){e.tickets=t.payload,e.isShowPreloader=!1}))}}),P=T.reducer,y=T.actions,M=y.showPreloader,R=(y.hidePreloader,n(27),n(0)),A=function(e){var t=e.handleChange,n=e.data,c=e.checked\u0421heckboxes;return Object(R.jsxs)("label",{className:"checkbox",children:[Object(R.jsx)("input",{onChange:function(e){return t(e)},className:"checkbox__invisible",type:"checkbox",checked:-1!==c.indexOf(n.value)||c.length===l.length,value:n.value}),Object(R.jsx)("span",{className:"checkbox__visible"}),n.title]})},I=(n(29),function(e){var t=e.children;return Object(R.jsx)("div",{className:"container",children:t})}),D=(n(30),function(e){var t=e.checked\u0421heckboxes,n=e.handle\u0421heckbox,c=e.handleCheckboxAll;return Object(R.jsx)(I,{children:Object(R.jsxs)("aside",{className:"filter",children:[Object(R.jsx)("p",{className:"filter__title",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"}),Object(R.jsx)(A,{handleChange:c,data:{title:"\u0412\u0441\u0435",value:"-1"},"checked\u0421heckboxes":t}),l.map((function(e){return Object(R.jsx)(A,{handleChange:n,data:e,"checked\u0421heckboxes":t},e.title)}))]})})}),F=(n(31),function(e){var t=e.currentValue,n=e.handleChange,c=e.name,r=e.title,i=e.position;return Object(R.jsxs)("label",{className:"input-radio",children:[Object(R.jsx)("input",{onChange:function(e){return n(e)},checked:t===c,className:"input-radio__invisible",type:"radio",name:c,value:c,tabIndex:1}),Object(R.jsx)("span",{className:"input-radio__visible  ".concat("l"===i&&"input-radio__invisible_position_left"," \n      ").concat("r"===i&&"input-radio__invisible_position_right"),children:r})]})}),E=(n(32),function(e){var t=e.radioValue,n=e.handleRadio;return Object(R.jsx)("div",{className:"tabs",children:h.map((function(e){return Object(R.jsx)(F,{handleChange:n,name:e.name,currentValue:t,title:e.title,position:e.position},e.name)}))})}),V=n.p+"static/media/logo.309a1b5d.svg",q=(n(33),function(){return Object(R.jsx)("header",{className:"header",children:Object(R.jsx)("img",{className:"header__logo",src:V,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f."})})}),B=(n(34),function(e){var t=e.children;return Object(R.jsx)("main",{className:"main",children:t})}),G=(n(35),function(e){var t=e.children;return Object(R.jsx)("div",{className:"column",children:t})}),J=(n(36),function(e){var t=e.children;return Object(R.jsx)("ul",{className:"tickets-list",children:t})}),L=(n(37),function(e){var t=e.title,n=e.text;return Object(R.jsxs)("div",{className:"cell",children:[Object(R.jsx)("p",{className:"cell__title",children:t}),n&&Object(R.jsx)("p",{className:"cell__text",children:n})]})}),H=(n(38),function(e){var t=e.isFirst,n=e.children;return Object(R.jsx)("div",{className:"row ".concat(t&&"row_first"),children:n})}),z=(n(39),function(e){var t=e.data,n=t.price,c=t.carrier,r=t.segments;return Object(R.jsxs)("li",{className:"ticket",children:[Object(R.jsxs)(H,{isFirst:!0,children:[Object(R.jsxs)("p",{className:"ticket__price",children:[n," \u0420"]}),Object(R.jsx)("img",{className:"ticket__logo",src:"https://pics.avs.io/99/36/".concat(c,".png"),alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u0430\u0432\u0438\u0430\u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438."})]}),r.map((function(e,t){return Object(R.jsxs)(H,{children:[Object(R.jsx)(L,{title:e.origin+"-"+e.destination,text:e.departureTime+"-"+e.arrivalTime}),Object(R.jsx)(L,{title:"\u0412 \u043f\u0443\u0442\u0438",text:e.duration}),Object(R.jsx)(L,{title:e.transplants,text:e.stops})]},t)}))]})});function K(e){return("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)}function Q(e){return e<60?e+"\u043c":e<1440?Math.floor(e/60)+"\u0447 "+e%60+"\u043c":Math.floor(e/1440)+"\u0434 "+Math.floor(e%1440/60)+"\u0447 "+e%60+"\u043c"}var U=function(e){var t=e.data,n=t.price,r=t.carrier,i=t.segments,a=Object(c.useMemo)((function(){return{price:n,carrier:r,segments:i.map((function(e){return{origin:e.origin,destination:e.destination,departureTime:K(new Date(e.date)),arrivalTime:(n=new Date(e.date),c=e.duration,n.setMinutes(n.getMinutes()+c),K(n)),stops:e.stops.join(","),transplants:(t=e.stops.length,0===t?"0 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a":1===t?"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430":t<5?t+" \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438":t+" \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),duration:Q(e.duration)};var t,n,c}))}}),[r,n,i]);return Object(R.jsx)(I,{children:Object(R.jsx)(z,{data:a})})},W=(n(40),function(e){var t=e.title,n=e.onClick,c=e.isShow;return Object(R.jsx)("button",{onClick:n,className:"btn ".concat(c&&"btn_show"),children:t})});var X=n(8);function Y(e){return e.segments.reduce((function(e,t){return e+t.duration}),0)}n(41),n(42);var Z=function(e){var t=e.isShow;return Object(R.jsx)("div",{className:"preloader ".concat(t&&"preloader_show"),children:Object(R.jsx)("div",{className:"preloader__container",children:Object(R.jsx)("span",{className:"preloader__round"})})})};var $=function(){var e=Object(o.c)((function(e){return e.tickets.tickets})),t=Object(o.c)((function(e){return e.tickets.isShowPreloader})),n=Object(o.c)((function(e){return e.filterTickets.radio})),r=Object(o.c)((function(e){return e.filterTickets.checkboxes})),i=Object(c.useState)(5),a=Object(s.a)(i,2),u=a[0],h=a[1],d=Object(c.useState)([]),b=Object(s.a)(d,2),j=b[0],f=b[1],v=Object(o.b)();Object(c.useEffect)((function(){f(function(e,t){switch(t){case"cheap":return Object(X.a)(e).sort((function(e,t){return e.price-t.price}));case"quick":return Object(X.a)(e).sort((function(e,t){return Y(e)-Y(t)}));case"optimal":return Object(X.a)(e).sort((function(e,t){return e.price+4*Y(e)-(t.price+4*Y(t))}));default:return e}}(e,n))}),[e,n]);var g=Object(c.useMemo)((function(){return function(e,t,n){if(0===e.length)return e;for(var c=[],r=0;c.length<n&&r<e.length;r++)e[r].segments.every((function(e){return t.includes(""+e.stops.length)}))&&c.push(e[r]);return c}(j,r,u)}),[j,r,u]);return Object(c.useEffect)((function(){v(S())}),[]),Object(R.jsxs)("div",{className:"app",children:[Object(R.jsx)(q,{}),Object(R.jsxs)(B,{children:[Object(R.jsx)(D,{"checked\u0421heckboxes":r,"handle\u0421heckbox":function(e){var t=e.target,n=t.checked,c=t.value;v(n?p(c):k(c))},handleCheckboxAll:function(e){r.length<l.length?v(m()):v(O())}}),Object(R.jsxs)(G,{children:[Object(R.jsx)(E,{radioValue:n,handleRadio:function(e){v(x(e.target.value))}}),Object(R.jsxs)(J,{children:[g.map((function(e,t){return Object(R.jsx)(U,{data:e},t)})),Object(R.jsx)(Z,{isShow:t})]}),Object(R.jsx)(W,{onClick:function(){h((function(e){return e+5}))},isShow:!t,title:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435 5 \u0431\u0438\u043b\u0435\u0442\u043e\u0432!"})]})]})]})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,44)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),i(e),a(e)}))},te=n(2),ne=Object(te.b)({filterTickets:j,tickets:P}),ce=Object(u.a)({reducer:ne});a.a.render(Object(R.jsx)(r.a.StrictMode,{children:Object(R.jsx)(o.a,{store:ce,children:Object(R.jsx)($,{})})}),document.getElementById("root")),ee()}]),[[43,1,2]]]);
//# sourceMappingURL=main.83c1c457.chunk.js.map